# 매출 하락 원인 분석

* 사용 데이터: Google Bigquery Demo Data인 Google Merchandise Store의 사용자 행동 데이터 사용.
* 데이터 기간: 2020년 11월 1일 ~ 2021년 1월 31일 3개월의 데이터 존재.
* 데이터 형태: GA4가 수집하는 형태로 이벤트를 기반으로 Struct 구조 데이터.
* 분석 환경: Google Bigquery 및 Google Data Studio 사용.

## 문제 정의

<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/ace29fa5-4564-45d8-9a61-e5322f26d646">

* 위 그래프를 보면 1월달의 매출이 12월과 비교했을 때 -64.3% 하락을 보임.
* 1월의 매출이 급격히 감소하는 문제를 발견.

## 가설 설정

*  데이터에 포함되어 있는 (not set) 데이터로 인해 매출이 감소했을 것이다.
*  거래 건수가 감소했을 것이다.
* 웹페이지를 접속하는 사용자가 감소했을 것이다.

> 총 3개의 가설을 기준으로 분석을 진행

### not set 데이터로 인한 매출 감소

* GA4로 수집된 데이터를 확인하면 특정 user가 구매한 상품명과 상품 가격이 (not set) 처리된 경우가 448개가 있음.
* 매출로 집계가 될 때 (not set)으로 수집된 상품들은 포함되지 않는 문제가 있음.
* 따라서 단순히 매출이 감소한 것이 아니라 제대로 데이터가 수집되지 않아, 매출이 줄어든 것처럼 보이는 것일 수가 있음.

<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/9f0f3f8b-21e9-4b3c-989e-def20f716f6c">

* 위 그래프는 purchase 이벤트가 발생한 유저들을 월별로 나누고, 구매한 상품명과 상품 가격이 (not set)인 것을 집계한 그래프
* 1월의 (not set) 개수가 11월, 12월 보다 대략 250개 정도 많이 포함되어 있음.
* 250개가 더 많은 (not set)이 실제로 제대로 수집되었다면 11월, 12월과 비슷한 매출을 보였을까?
* 최소, 사용자가 상품을 몇 개씩 샀는지에 대한 데이터가 기록된다면, 유추할 수는 있지만, 이 또한 (not set)으로 전부 표시되어 정확히 알 수 없음.
* 하지만, 구매된 상품 중 가장 비싸게 판매된 상품의 가격은 120$임.
* 250 * 120 = 30000 으로 이를 1월 매출과 합해도 11월, 12월 매출에 비해서는 낮은 수준을 보임.
* 낮은 수준을 보이지만, 한 사용자가 120$ 상품을 여러개 샀을 수도 있으며, 여러개 샀을 때 꼭 120$의 상품을 사지 않았을 수도 있음.
* 즉, 가장 비싼 물건을 사용자가 하나씩 샀다는 가정이면, (not set)과는 상관없이 1월의 매출이 감소했다고 볼 수 있음.
* 하지만, 모든 조건을 현재 데이터로 파악할 수 없고, 매출 분석의 원인을 찾아가는 프로젝트를 진행하는 것이므로 (not set)의 영향이 없다고 가정하고 분석을 진행.
* 따라서 purchase 이벤트가 발생한 사용자 중 구매한 상품명, 가격, 개수 등이 (not set)인 데이터는 모두 제거하고 분석 진행.

### 거래 건수 감소로 인한 매출 하락

* 매출이 감소한 이유를 가장 먼저 상품을 구매하는 거래 건수가 줄었기 때문이라고 생각.
* 구매 사용자는 그대로인데, 구매 사용자가 월 2~3번씩 거래를 하다가 1번만 하게 되어서 매출이 감소했을 수 있다고 생각.

<image src = "https://github.com/wbin0718/User_Weblog_Data_Analysis/assets/104637982/39cddbe7-b459-4a8b-9b3c-668ce3cf6a50">

* 위 그래프 중 선 그래프는 월별 거래 건수를 나타냄.
* 1월달이 12월과 비교했을 때 -61%의 거래가 감소함.
* 하지만 여기서 확인하고자 하는 것은 거래 건수가 사용자의 평균 횟수가 줄었는 지를 확인하는 것임.
* 단순히 거래건수만 확인을 하는 것은 무의미 하다고 생각하는 것은 구매한 사용자 수가 줄어서 거래건 수가 줄었을 수 있기 때문임.
* 따라서 월별 사용자 한명 당 평균적으로 얼마나 거래를 했는 지 살펴볼 필요가 있음.

![image](https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/12de25ee-dbb6-4b18-9233-13aaf1a76a5c)

* 위 그래프를 보면 11월, 12월, 1월 모두 구매 사용자 수를 고려했을 때 평균적으로 사용자마다 1번의 구매를 하는 것으로 보임!
* 사실 상 구매 사용자의 거래 횟수는 월별로 차이는 없으며 위 첫 번째 그래프를 봤을 때 구매 사용자 수도 감소하는 것을 볼 수 있었음!
* 따라서 거래 건수가 감소해서 매출이 감소한 것이 아닌 구매하는 사용자 수가 줄어서 매출이 감소했다고 볼 수 있음.

### 구매자 수가 감소로 인한 매출 하락

* 구매자 수가 왜 감소했을까? -> 방문한 세션이 적어서 그런 것이 아닐까?
<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/0bc453e6-193b-4a6e-9237-fedce55bbed9">

* 위 그래프는 월별 세션 수를 나타내는 그래프임.
* 방문한 세션은 1월이 12월 보다는 낮지만, 11월 보다는 높음! -> 11월 보다 세션이 많은데 매출은 차이가 많이남.
* 월별 세션만 보고서는 세션이 매출과 관련있는 것을 파악하기는 어려움.
* 세션을 기존 세션, 신규 세션으로 나누어 볼 필요가 있을 것 같음!
<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/0853a781-22af-4779-80ce-8b7951f2f21f">

* 위 그래프는 월별 세션을 전체 세션, 신규 세션, 기존 세션으로 나누어 집계한 그래프를 나타냄.
* 1월의 신규 세션이 12월 보다는 낮지만, 11월 보다는 높음!
* 하지만 1월의 기존 세션이 11월과 12월 보다 대략 20.9% 하락한 것을 볼 수 있음.
* 이 그래프를 보면 매출은 신규 세션 보다 기존 세션의 영향을 많이 미치는 것인가? 를 생각 해 볼 수 있음!
* 이를 알아보기 위해 구매한 세션 중 기존 세션과 신규 세션을 나눠 집계를 해 보면 좋을 것 같음!

<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/7523a401-d4a8-4cf4-8ecc-4e790aae1844">

* 위 그래프는 구매한 세션 수와, 신규 세션 & 구매, 기존 세션 & 구매를 집계한 그래프임.
* 11월과 12월에 비해 11월의 구매 세션, 구매한 신규 세션, 구매한 기존 세션이 급격히 하락을 함.
* 하지만, 12월과 비교했을 때 전체 구매 세션은 1월이 58% 감소, 신규 세션은 52% 감소인 반면, 기존 세션은 62%로 더 많은 하락을 보임.

<image src = "https://github.com/wbin0718/User_Weblog_Data_Analysis/assets/104637982/048e6467-87ff-4342-ab6e-4c8ae666ce7f">

* 위 그래프는 신규 세션, 기존 세션의 구매 전환율을 나타내는 그래프임.
* 그래프르 보면 신규 세션 보다, 기존 세션의 구매 전환율이 높은 것을 볼 수 있음.
* 즉, 기존 세션의 접속 감소로 인해, 기존 세션의 구매 전환율이 낮아지고 이로 인한 매출의 감소로 영향을 줬을 수 있음.

### 기존 세션 리텐션 분석

* 기존 세션의 감소로 인해 매출이 감소되었음을 알 수 있는데, 그렇다면 기존 세션의 리텐션은 어떻게 되는지 확인해 볼 필요가 있음!
* 지금 서비스는 쇼핑몰 서비스로, 사용자가 매일 사용하는 것이 아닌 특정 주기로 접속하므로 클래식 리텐션이 아닌, 범위 리텐션을 사용함.
* 또한 가입시기 별 범위 리텐션 분석을 진행함.

<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/c927d169-742e-4d55-b5a8-9af503d17a97">

* 위 그래프는 가입 월을 코호트로 나눈 범위 리텐션 비율을 나타냄.
* 이때 Week_1의 의미는 첫 방문 시기 이후 7일 내 접속한 리텐션을 의미함.
* 리텐션 차트를 보면, 대부분 첫 방문하고 재 방문을 하지 않음.
* 11월은 그래도 12월, 1월 보다 상대적으로 2주 내 재방문 비율이 높은 편임.
* 특히, 1월은 11월, 12월보다 1주, 2주 리텐션이 상대적으로 급격히 감소함.
* 결국 리텐션 비율을 높이는 데 목표를 두어야 할 것 같음.

### 신규 가입자 퍼널 분석

* 위에서 신규 세션의 구매 전환율이 기존 세션의 구매 전환율 보다 낮은 것을 볼 수 있었음.
* 신규 세션은 구매 전환율이 0%인 이유가 무엇일까?
* session start -> view item -> add_to_cart -> begin checkout -> purchase 각 단계의 전환율을 분석 해 볼 필요가 있음.

<image src = "https://github.com/wbin0718/google_analytics_dashboard/assets/104637982/3144aad1-cd7d-422f-8fcc-a51eea614634">

* 위 차트는 월별 신규 세션의 퍼널 분석을 나타냄.
* 우선 session start -> view item으로 넘어가는 비율이 너무 낮음.
* 전체 세션 중 20%만 view item으로 넘어감.
* 쇼핑몰인데, view item으로 넘어가는 비율이 20%? -> 왜 그럴까?
* 주관적인 생각으로는, 신규 고객 유치 목적으로 제공하는 배너 광고 등을 잘못 클릭해서 접속을 하게 된 것이 아닐까?

## 분석 결과

1. 매출이 12월과 비교해서 -64.3% 하락.
2. 데이터 중 구매 데이터 중 상품명, 가격, 수량이 (not set)으로 수집된 데이터가 있음.
3. 1월이 다른 월보다 (not set) 데이터가 250개 정도 많지만, 가장 비싼 상품을 1개씩 샀다고 가정했을 때 역시 매출 하락을 보임. (하지만, 수량은 고려하지 않음, 수량을 고려한다면 사실 매출 감소가 아닐 수도 있지만 매출 하락을 가정으로 분석 진행)
4. 1월의 거래 건수가 12월 보다 61% 감소를 했지만 이는 거래한 사용자 수와 관련이 있으므로 사용자당 평균 몇 번의 구매를 하는 지 살펴볼 필요가 있음.
5. 한 사용자마다 월 평균 1번씩만 구매를 하는 것으로 보임. -> 매출의 감소는 한 사용자의 구매 건수가 감소한 것이 원인이 아닌 것 같으며, 구매한 사용자가 감소한 것이 원인인 것 같음.
6. 1월 세션이 11월, 12월보다 약 20.9% 하락함.
7. 세션을 보면 신규 세션, 기존 세션 모두 감소했지만 1월은 11월 보다 전체 세션 수 및 신규 세션이 많음. -> 즉, 1월의 매출 감소는 기존 세션의 감소로 이어진 것으로 생각됨.
8. 실제로 신규 세션52%, 기존 세션 62%로 더 큰 하락을 보임. 또한 구매 전환율이 신규 세션은 평균 0.6%, 기존 세션은 2.83%를 보임. -> 즉, 신규 세션보다 기존 세션의 영향을 많이 받는 것을 알 수 있음.
9. 11월의 경우 기존 세션의 리텐션 비율이 다른 월과 비교했을 때 상대적으로 높음. 하지만 1월은 상대적으로 다른 월과 비교했을 때 리텐션 비율이 급격히 떨어지는 경향을 보임.
10. 신규 가입자의 구매 전환율이 낮은데, 5단계 퍼널 분석을 통해 세션이 시작 후 아이템을 보는 경우가 20% 밖에 안됨.

## 앞으로 개선할 방안

1. (not set) 데이터
   
   * 구글 애널리틱스4 (not set) 데이터는 utm 파라미터가 제대로 설정되지 않아 발생하는 경우가 많음. -> UTM 파라미터가 제대로 설정되었는 지 확인 필요.
   * 매출을 분석할 때 제대로 데이터가 수집되지 않아 정말 매출이 하락한 것인지 정확히 파악하는 것이 어려움. -> 실제 서비스라면 이로 인해 제대로 된 분석이 이뤄질 수 없을 것 같음. -> 데이터가 제대로 수집되는 지 파악하는 것이 중요함.

2. 기존 세션의 감소

  * 현재 서비스는 기존 세션이 매출에 많은 영향을 미친다고 볼 수 있음. 하지만, 기존 세션의 방문이 점점 줄어드는 문제가 발생하고 있음.
  * 따라서 재방문을 유도하는 CRM 마케팅을 점검해 봐야 함.
  * 오래 접속하지 않은 고객 및 장바구니에 담기만 하고 구매하지 않은 고객을 선별하여 푸시 메시지를 발송하는 것을 점검 해 보는 것이 중요함.

3. 구매 전환율 감소

    * 구매 전환율이 전체 세션, 기존 세션, 신규 세션 모두 감소하는 모습을 보임.
    * 특히 기존 세션의 구매 전환율이 가장 큰 폭으로 감소 -> 가격이나 다른 이유로 망설이는 고객일 수도 있음. -> 구매를 유도하도록 쿠폰이나 할인 등 부가적인 혜택을 통해 구매 욕구를 상승시키는 것이 중요함.

4. view item 전환율

  * 신규 세션의 view item 전환율이 20%로 매우 낮음.
  * 쇼핑몰의 특성상 view item 전환율은 높아야 할 것 같음. 대부분 신규 사용자가 view item을 하지 않고, 바로 웹사이트를 나간다는 것을 의미함.
  * 잘못된 광고 배너 위치로 잘못 클릭하여 접속했을 가능성이 있을 수 있음.
  * 세션의 접속 경로를 파악하고 해당 광고 배너 등이 무엇인지 파악해 배너 위치 설정을 다시 할 필요가 있음.

## 한계점

1. 구글 애널리틱스4의 데모 계정으로 제대로 수집되지 않고, 데모 계정에서는 접근할 수 없는 데이터가 다수 존재. -> 특히 유입 경로를 통해 깊은 분석을 진행 해 볼 수 있지만 대부분 (not set)으로 설정 되어 있었음.
  * 제대로 수집되지 않은 데이터로 인해 분석 결과가 잘못 해석 될 수도 있으며, 원하는 결과물을 추출할 수 없는 문제가 발생함.
  * 즉 실제 서비스 관점으로 생각했을 때 이런 문제를 발생하지 않게 하기 위해서 처음부터 정확한 이벤트 로그를 설계하고 데이터가 원하는 형태로 수집이 되어지는 지 확인하는 것이 가장 중요하다는 것을 깨달음.

2. 신규 세션이 많은데, view item으로 전환되는 비율이 낮음. -> 회원 가입 이벤트를 추가해서 정말 신규 세션이 쇼핑이 목적인지 파악할 수 있었다면 정확한 분석을 진행했을 수도 있을 것 같음.
